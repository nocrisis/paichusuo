/** layui-v2.3.0-rc1-lmf-1.0.18 MIT License By https://www.layui.com */
 ;layui.define("layer",function(e){"use strict";var i=layui.$,t=layui.layer,n=layui.hint(),o=layui.device(),a={config:{},set:function(e){var t=this;return t.config=i.extend({},t.config,e),t},on:function(e,i){return layui.onevent.call(this,r,e,i)}},l=function(){var e=this;return{upload:function(i){e.upload.call(e,i)},config:e.config}},r="upload",u="layui-upload-file",c="layui-upload-form",f="layui-upload-iframe",s="layui-upload-choose",p=function(e){var t=this;t.config=i.extend({},t.config,a.config,e),t.render()};p.prototype.config={accept:"images",exts:"",auto:!0,bindAction:"",url:"",field:"file",method:"post",data:{},drag:!0,size:0,number:0,multiple:!1},p.prototype.render=function(e){var t=this,e=t.config;e.elem=i(e.elem),e.bindAction=i(e.bindAction),t.file(),t.events()},p.prototype.file=function(){var e=this,t=e.config,n=e.elemFile=i(['<input class="'+u+'" type="file" accept="'+t.acceptMime+'" name="'+t.field+'"',t.multiple?" multiple":"",">"].join("")),a=t.elem.next();(a.hasClass(u)||a.hasClass(c))&&a.remove(),o.ie&&o.ie<10&&t.elem.wrap('<div class="layui-upload-wrap"></div>'),e.isFile()?(e.elemFile=t.elem,t.field=t.elem[0].name):t.elem.after(n),o.ie&&o.ie<10&&e.initIE()},p.prototype.initIE=function(){var e=this,t=e.config,n=i('<iframe id="'+f+'" class="'+f+'" name="'+f+'" frameborder="0"></iframe>'),o=i(['<form target="'+f+'" class="'+c+'" method="'+t.method,'" key="set-mine" enctype="multipart/form-data" action="'+t.url+'">',"</form>"].join(""));i("#"+f)[0]||i("body").append(n),t.elem.next().hasClass(c)||(e.elemFile.wrap(o),t.elem.next("."+c).append(function(){var e=[];return layui.each(t.data,function(i,t){t="function"==typeof t?t():t,e.push('<input type="hidden" name="'+i+'" value="'+t+'">')}),e.join("")}()))},p.prototype.msg=function(e){return t.msg(e,{icon:5,shift:6})},p.prototype.isFile=function(){var e=this.config.elem[0];if(e)return"input"===e.tagName.toLocaleLowerCase()&&"file"===e.type},p.prototype.preview=function(e){var i=this;window.FileReader?layui.each(i.chooseFiles,function(i,t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e&&e(i,t,this.result)}}):t.notify("error","当前浏览器版本过低,不支持预览与上传")},p.prototype.upload=function(e,t){var n,a=this,l=a.config,r=a.elemFile[0],u=function(){var t=0,n=0,o=e||a.files||a.chooseFiles||r.files,u=function(){l.multiple&&t+n===a.fileLength&&"function"==typeof l.allDone&&l.allDone({total:a.fileLength,successful:t,aborted:n})};layui.each(o,function(e,o){var r=new FormData;r.append(l.field,o),layui.each(l.data,function(i,t){t="function"==typeof t?t(e):t,r.append(i,t)}),i.ajax({url:l.url,type:l.method,data:r,contentType:!1,processData:!1,dataType:"json",headers:l.headers||{},success:function(i){t++,d(e,i),u()},error:function(){n++,a.msg("请求上传接口出现异常"),m(e),u()}})})},c=function(){var e=i("#"+f);a.elemFile.parent().submit(),clearInterval(p.timer),p.timer=setInterval(function(){var i,t=e.contents().find("body");try{i=t.text()}catch(n){a.msg("获取上传后的响应信息出现异常"),clearInterval(p.timer),m()}i&&(clearInterval(p.timer),t.html(""),d(0,i))},30)},d=function(e,i){if(a.elemFile.next("."+s).remove(),r.value="","object"!=typeof i)try{i=JSON.parse(i)}catch(t){return i={},a.msg("请对上传接口返回有效JSON")}"function"==typeof l.done&&l.done(i,e||0,function(e){a.upload(e)})},m=function(e){l.auto&&(r.value=""),"function"==typeof l.error&&l.error(e||0,function(e){a.upload(e)})},h=l.exts,v=function(){var i=[];return layui.each(e||a.chooseFiles,function(e,t){i.push(t.name)}),i}(),g={preview:function(e){a.preview(e)},upload:function(e,i){var t={};t[e]=i,a.upload(t)},pushFile:function(){return a.files=a.files||{},layui.each(a.chooseFiles,function(e,i){a.files[e]=i}),a.files},resetFile:function(e,i,t){var n=new File([i],t);a.files=a.files||{},a.files[e]=n}},y=function(){if("choose"!==t&&!l.auto||(l.choose&&l.choose(g),"choose"!==t))return l.before&&l.before(g),o.ie?o.ie>9?u():c():void u()};if(v=0===v.length?r.value.match(/[^\/\\]+\..+/g)||[]||"":v,0!==v.length){switch(l.accept){case"file":if(h&&!RegExp("\\w\\.("+h+")$","i").test(escape(v)))return a.msg("选择的文件中包含不支持的格式"),r.value="";break;case"video":if(!RegExp("\\w\\.("+(h||"avi|mp4|wma|rmvb|rm|flash|3gp|flv")+")$","i").test(escape(v)))return a.msg("选择的视频中包含不支持的格式"),r.value="";break;case"audio":if(!RegExp("\\w\\.("+(h||"mp3|wav|mid")+")$","i").test(escape(v)))return a.msg("选择的音频中包含不支持的格式"),r.value="";break;default:if(layui.each(v,function(e,i){RegExp("\\w\\.("+(h||"jpg|png|gif|bmp|jpeg$")+")","i").test(escape(i))||(n=!0)}),n)return a.msg("选择的图片中包含不支持的格式"),r.value=""}if(a.fileLength=function(){var i=0,t=e||a.files||a.chooseFiles||r.files;return layui.each(t,function(){i++}),i}(),l.number&&a.fileLength>l.number)return a.msg("同时最多只能上传的数量为："+l.number);if(l.size>0&&!(o.ie&&o.ie<10)){var F;if(layui.each(a.chooseFiles,function(e,i){if(i.size>1024*l.size){var t=l.size/1024;t=t>=1?t.toFixed(2)+"MB":l.size+"KB",r.value="",F=t}}),F)return a.msg("文件不能超过"+F)}y()}},p.prototype.events=function(){var e=this,t=e.config,a=function(i){e.chooseFiles={},layui.each(i,function(i,t){var n=(new Date).getTime();e.chooseFiles[n+"-"+i]=t})},l=function(i,n){var o=e.elemFile,a=i.length>1?i.length+"个文件":(i[0]||{}).name||o[0].value.match(/[^\/\\]+\..+/g)||[]||"";o.next().hasClass(s)&&o.next().remove(),e.upload(null,"choose"),e.isFile()||t.choose||o.after('<span class="layui-inline '+s+'">'+a+"</span>")};t.elem.off("upload.start").on("upload.start",function(){var o=i(this),a=o.attr("lay-data");if(a)try{a=new Function("return "+a)(),e.config=i.extend({},t,a)}catch(l){n.error("Upload element property lay-data configuration item has a syntax error: "+a)}e.config.item=o,e.elemFile[0].click()}),o.ie&&o.ie<10||t.elem.off("upload.over").on("upload.over",function(){var e=i(this);e.attr("lay-over","")}).off("upload.leave").on("upload.leave",function(){var e=i(this);e.removeAttr("lay-over")}).off("upload.drop").on("upload.drop",function(n,o){var r=i(this),u=o.originalEvent.dataTransfer.files||[];r.removeAttr("lay-over"),a(u),t.auto?e.upload(u):l(u)}),e.elemFile.off("upload.change").on("upload.change",function(){var i=this.files||[];a(i),t.auto?e.upload():l(i)}),t.bindAction.off("upload.action").on("upload.action",function(){e.upload()}),t.elem.data("haveEvents")||(e.elemFile.on("change",function(){i(this).trigger("upload.change")}),t.elem.on("click",function(){e.isFile()||i(this).trigger("upload.start")}),t.drag&&t.elem.on("dragover",function(e){e.preventDefault(),i(this).trigger("upload.over")}).on("dragleave",function(e){i(this).trigger("upload.leave")}).on("drop",function(e){e.preventDefault(),i(this).trigger("upload.drop",e)}),t.bindAction.on("click",function(){i(this).trigger("upload.action")}),t.elem.data("haveEvents",!0))},a.render=function(e){var i=new p(e);return l.call(i)},e(r,a)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheS9tb2R1bGVzL3VwbG9hZC5qcyJdLCJuYW1lcyI6WyJsYXl1aSIsImRlZmluZSIsImV4cG9ydHMiLCIkIiwibGF5ZXIiLCJoaW50IiwiZGV2aWNlIiwidXBsb2FkIiwiY29uZmlnIiwic2V0Iiwib3B0aW9ucyIsInRoYXQiLCJ0aGlzIiwiZXh0ZW5kIiwib24iLCJldmVudHMiLCJjYWxsYmFjayIsIm9uZXZlbnQiLCJjYWxsIiwiTU9EX05BTUUiLCJ0aGlzVXBsb2FkIiwiZmlsZXMiLCJFTEVNX0ZJTEUiLCJFTEVNX0ZPUk0iLCJFTEVNX0lGUkFNRSIsIkVMRU1fQ0hPT1NFIiwiQ2xhc3MiLCJyZW5kZXIiLCJwcm90b3R5cGUiLCJhY2NlcHQiLCJleHRzIiwiYXV0byIsImJpbmRBY3Rpb24iLCJ1cmwiLCJmaWVsZCIsIm1ldGhvZCIsImRhdGEiLCJkcmFnIiwic2l6ZSIsIm51bWJlciIsIm11bHRpcGxlIiwiZWxlbSIsImZpbGUiLCJlbGVtRmlsZSIsImFjY2VwdE1pbWUiLCJqb2luIiwibmV4dCIsImhhc0NsYXNzIiwicmVtb3ZlIiwiaWUiLCJ3cmFwIiwiaXNGaWxlIiwibmFtZSIsImFmdGVyIiwiaW5pdElFIiwiaWZyYW1lIiwiZWxlbUZvcm0iLCJhcHBlbmQiLCJhcnIiLCJlYWNoIiwia2V5IiwidmFsdWUiLCJwdXNoIiwibXNnIiwiY29udGVudCIsImljb24iLCJzaGlmdCIsInRhZ05hbWUiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsInR5cGUiLCJwcmV2aWV3Iiwid2luZG93IiwiRmlsZVJlYWRlciIsImNob29zZUZpbGVzIiwiaW5kZXgiLCJyZWFkZXIiLCJyZWFkQXNEYXRhVVJMIiwib25sb2FkIiwicmVzdWx0Iiwibm90aWZ5IiwiY2hlY2siLCJhamF4U2VuZCIsInN1Y2Nlc3NmdWwiLCJhYm9ydGVkIiwiaXRlbXMiLCJhbGxEb25lIiwiZmlsZUxlbmd0aCIsInRvdGFsIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFqYXgiLCJjb250ZW50VHlwZSIsInByb2Nlc3NEYXRhIiwiZGF0YVR5cGUiLCJoZWFkZXJzIiwic3VjY2VzcyIsInJlcyIsImRvbmUiLCJlcnJvciIsImlmcmFtZVNlbmQiLCJwYXJlbnQiLCJzdWJtaXQiLCJjbGVhckludGVydmFsIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImlmcmFtZUJvZHkiLCJjb250ZW50cyIsImZpbmQiLCJ0ZXh0IiwiZSIsImh0bWwiLCJKU09OIiwicGFyc2UiLCJpIiwiaXRlbSIsImFyZ3MiLCJ0aGlzRmlsZSIsInB1c2hGaWxlIiwicmVzZXRGaWxlIiwiZmlsZW5hbWUiLCJuZXdGaWxlIiwiRmlsZSIsInNlbmQiLCJjaG9vc2UiLCJiZWZvcmUiLCJsZW5ndGgiLCJtYXRjaCIsIlJlZ0V4cCIsInRlc3QiLCJlc2NhcGUiLCJsaW1pdFNpemUiLCJ0b0ZpeGVkIiwic2V0Q2hvb3NlRmlsZSIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInNldENob29zZVRleHQiLCJvZmYiLCJvdGhpcyIsImF0dHIiLCJGdW5jdGlvbiIsImNsaWNrIiwicmVtb3ZlQXR0ciIsInBhcmFtIiwib3JpZ2luYWxFdmVudCIsImRhdGFUcmFuc2ZlciIsInRyaWdnZXIiLCJwcmV2ZW50RGVmYXVsdCIsImluc3QiXSwibWFwcGluZ3MiOiI7RUFRQUEsTUFBTUMsT0FBTyxRQUFVLFNBQVNDLEdBQzlCLFlBRUEsSUFBSUMsR0FBSUgsTUFBTUcsRUFDYkMsRUFBUUosTUFBTUksTUFDZEMsRUFBT0wsTUFBTUssT0FDYkMsRUFBU04sTUFBTU0sU0FHZkMsR0FDQ0MsVUFHQ0MsSUFBSyxTQUFTQyxHQUNiLEdBQUlDLEdBQU9DLElBRVgsT0FEQUQsR0FBS0gsT0FBU0wsRUFBRVUsVUFBV0YsRUFBS0gsT0FBUUUsR0FDakNDLEdBSVJHLEdBQUksU0FBU0MsRUFBUUMsR0FDcEIsTUFBT2hCLE9BQU1pQixRQUFRQyxLQUFLTixLQUFNTyxFQUFVSixFQUFRQyxLQUtyREksRUFBYSxXQUNaLEdBQUlULEdBQU9DLElBQ1gsUUFDRUwsT0FBUSxTQUFT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N0IsRUFBT29CLE9BQVMsU0FBU2pCLEdBQ3ZCLEdBQUkwSSxHQUFPLEdBQUkxSCxHQUFNaEIsRUFDckIsT0FBT1UsR0FBV0YsS0FBS2tJLElBR3pCbEosRUFBUWlCLEVBQVVaIiwiZmlsZSI6ImxheS9tb2R1bGVzL3VwbG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuXG4gQFRpdGxlOiBsYXl1aS51cGxvYWQg5paH5Lu25LiK5LygXG4gQEF1dGhvcjog6LSk5b+DXG4gQExpY2Vuc2XvvJpNSVRcblxuICovXG4gXG5sYXl1aS5kZWZpbmUoJ2xheWVyJyAsIGZ1bmN0aW9uKGV4cG9ydHMpe1xuICBcInVzZSBzdHJpY3RcIjtcbiAgXG4gIHZhciAkID0gbGF5dWkuJFxuICAsbGF5ZXIgPSBsYXl1aS5sYXllclxuICAsaGludCA9IGxheXVpLmhpbnQoKVxuICAsZGV2aWNlID0gbGF5dWkuZGV2aWNlKClcblxuICAvL+WklumDqOaOpeWPo1xuICAsdXBsb2FkID0ge1xuICAgIGNvbmZpZzoge30gLy/lhajlsYDphY3nva7poblcblxuICAgIC8v6K6+572u5YWo5bGA6aG5XG4gICAgLHNldDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGF0LmNvbmZpZyA9ICQuZXh0ZW5kKHt9LCB0aGF0LmNvbmZpZywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhhdDtcbiAgICB9XG4gICAgXG4gICAgLy/kuovku7bnm5HlkKxcbiAgICAsb246IGZ1bmN0aW9uKGV2ZW50cywgY2FsbGJhY2spe1xuICAgICAgcmV0dXJuIGxheXVpLm9uZXZlbnQuY2FsbCh0aGlzLCBNT0RfTkFNRSwgZXZlbnRzLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XG4gIFxuICAvL+aTjeS9nOW9k+WJjeWunuS+i1xuICAsdGhpc1VwbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICB1cGxvYWQ6IGZ1bmN0aW9uKGZpbGVzKXtcbiAgICAgICAgdGhhdC51cGxvYWQuY2FsbCh0aGF0LCBmaWxlcyk7XG4gICAgICB9XG4gICAgICAsY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgIH1cbiAgfVxuICBcbiAgLy/lrZfnrKbluLjph49cbiAgLE1PRF9OQU1FID0gJ3VwbG9hZCcsIEVMRU0gPSAnLmxheXVpLXVwbG9hZCcsIFRISVMgPSAnbGF5dWktdGhpcycsIFNIT1cgPSAnbGF5dWktc2hvdycsIEhJREUgPSAnbGF5dWktaGlkZScsIERJU0FCTEVEID0gJ2xheXVpLWRpc2FibGVkJ1xuICBcbiAgLEVMRU1fRklMRSA9ICdsYXl1aS11cGxvYWQtZmlsZScsIEVMRU1fRk9STSA9ICdsYXl1aS11cGxvYWQtZm9ybScsIEVMRU1fSUZSQU1FID0gJ2xheXVpLXVwbG9hZC1pZnJhbWUnLCBFTEVNX0NIT09TRSA9ICdsYXl1aS11cGxvYWQtY2hvb3NlJywgRUxFTV9EUkFHID0gJ2xheXVpLXVwbG9hZC1kcmFnJ1xuICBcbiAgXG4gIC8v5p6E6YCg5ZmoXG4gICxDbGFzcyA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB0aGF0LmNvbmZpZyA9ICQuZXh0ZW5kKHt9LCB0aGF0LmNvbmZpZywgdXBsb2FkLmNvbmZpZywgb3B0aW9ucyk7XG4gICAgdGhhdC5yZW5kZXIoKTtcbiAgfTtcbiAgXG4gIC8v6buY6K6k6YWN572uXG4gIENsYXNzLnByb3RvdHlwZS5jb25maWcgPSB7XG4gICAgYWNjZXB0OiAnaW1hZ2VzJyAvL+WFgeiuuOS4iuS8oOeahOaWh+S7tuexu+Wei++8mmltYWdlcy9maWxlL3ZpZGVvL2F1ZGlvXG4gICAgLGV4dHM6ICcnIC8v5YWB6K645LiK5Lyg55qE5paH5Lu25ZCO57yA5ZCNXG4gICAgLGF1dG86IHRydWUgLy/mmK/lkKbpgInlrozmlofku7blkI7oh6rliqjkuIrkvKBcbiAgICAsYmluZEFjdGlvbjogJycgLy/miYvliqjkuIrkvKDop6blj5HnmoTlhYPntKBcbiAgICAsdXJsOiAnJyAvL+S4iuS8oOWcsOWdgFxuICAgICxmaWVsZDogJ2ZpbGUnIC8v5paH5Lu25a2X5q615ZCNXG4gICAgLG1ldGhvZDogJ3Bvc3QnIC8v6K+35rGC5LiK5Lyg55qEaHR0cOexu+Wei1xuICAgICxkYXRhOiB7fSAvL+ivt+axguS4iuS8oOeahOmineWkluWPguaVsFxuICAgICxkcmFnOiB0cnVlIC8v5piv5ZCm5YWB6K645ouW5ou95LiK5LygXG4gICAgLHNpemU6IDAgLy/mlofku7bpmZDliLblpKflsI/vvIzpu5jorqTkuI3pmZDliLZcbiAgICAsbnVtYmVyOiAwIC8v5YWB6K645ZCM5pe25LiK5Lyg55qE5paH5Lu25pWw77yM6buY6K6k5LiN6ZmQ5Yi2XG4gICAgLG11bHRpcGxlOiBmYWxzZSAvL+aYr+WQpuWFgeiuuOWkmuaWh+S7tuS4iuS8oO+8jOS4jeaUr+aMgWllOC05XG4gIH07XG4gIFxuICAvL+WIneWni+a4suafk1xuICBDbGFzcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgLG9wdGlvbnMgPSB0aGF0LmNvbmZpZztcblxuICAgIG9wdGlvbnMuZWxlbSA9ICQob3B0aW9ucy5lbGVtKTtcbiAgICBvcHRpb25zLmJpbmRBY3Rpb24gPSAkKG9wdGlvbnMuYmluZEFjdGlvbik7XG5cbiAgICB0aGF0LmZpbGUoKTtcbiAgICB0aGF0LmV2ZW50cygpO1xuICB9O1xuICBcbiAgLy/ov73liqDmlofku7bln59cbiAgQ2xhc3MucHJvdG90eXBlLmZpbGUgPSBmdW5jdGlvbigpe1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgICxvcHRpb25zID0gdGhhdC5jb25maWdcbiAgICAsZWxlbUZpbGUgPSB0aGF0LmVsZW1GaWxlID0gJChbXG4gICAgICAnPGlucHV0IGNsYXNzPVwiJysgRUxFTV9GSUxFICsnXCIgdHlwZT1cImZpbGVcIiBhY2NlcHQ9XCInKyBvcHRpb25zLmFjY2VwdE1pbWUgKydcIiBuYW1lPVwiJysgb3B0aW9ucy5maWVsZCArJ1wiJ1xuICAgICAgLChvcHRpb25zLm11bHRpcGxlID8gJyBtdWx0aXBsZScgOiAnJykgXG4gICAgICAsJz4nXG4gICAgXS5qb2luKCcnKSlcbiAgICAsbmV4dCA9IG9wdGlvbnMuZWxlbS5uZXh0KCk7XG4gICAgXG4gICAgaWYobmV4dC5oYXNDbGFzcyhFTEVNX0ZJTEUpIHx8IG5leHQuaGFzQ2xhc3MoRUxFTV9GT1JNKSl7XG4gICAgICBuZXh0LnJlbW92ZSgpO1xuICAgIH1cbiAgICBcbiAgICAvL+WMheijuWllOC855a655ZmoXG4gICAgaWYoZGV2aWNlLmllICYmIGRldmljZS5pZSA8IDEwKXtcbiAgICAgIG9wdGlvbnMuZWxlbS53cmFwKCc8ZGl2IGNsYXNzPVwibGF5dWktdXBsb2FkLXdyYXBcIj48L2Rpdj4nKTtcbiAgICB9XG4gICAgXG4gICAgdGhhdC5pc0ZpbGUoKSA/IChcbiAgICAgIHRoYXQuZWxlbUZpbGUgPSBvcHRpb25zLmVsZW1cbiAgICAgICxvcHRpb25zLmZpZWxkID0gb3B0aW9ucy5lbGVtWzBdLm5hbWVcbiAgICApIDogb3B0aW9ucy5lbGVtLmFmdGVyKGVsZW1GaWxlKTtcbiAgICBcbiAgICAvL+WIneWni+WMlmllOC8555qERm9ybeWfn1xuICAgIGlmKGRldmljZS5pZSAmJiBkZXZpY2UuaWUgPCAxMCl7XG4gICAgICB0aGF0LmluaXRJRSgpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vaWU4LTnliJ3lp4vljJZcbiAgQ2xhc3MucHJvdG90eXBlLmluaXRJRSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgLG9wdGlvbnMgPSB0aGF0LmNvbmZpZ1xuICAgICxpZnJhbWUgPSAkKCc8aWZyYW1lIGlkPVwiJysgRUxFTV9JRlJBTUUgKydcIiBjbGFzcz1cIicrIEVMRU1fSUZSQU1FICsnXCIgbmFtZT1cIicrIEVMRU1fSUZSQU1FICsnXCIgZnJhbWVib3JkZXI9XCIwXCI+PC9pZnJhbWU+JylcbiAgICAsZWxlbUZvcm0gPSAkKFsnPGZvcm0gdGFyZ2V0PVwiJysgRUxFTV9JRlJBTUUgKydcIiBjbGFzcz1cIicrIEVMRU1fRk9STSArJ1wiIG1ldGhvZD1cIicrIG9wdGlvbnMubWV0aG9kXG4gICAgICAsJ1wiIGtleT1cInNldC1taW5lXCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIiBhY3Rpb249XCInKyBvcHRpb25zLnVybCArJ1wiPidcbiAgICAsJzwvZm9ybT4nXS5qb2luKCcnKSk7XG4gICAgXG4gICAgLy/mj5LlhaVpZnJhbWUgICAgXG4gICAgJCgnIycrIEVMRU1fSUZSQU1FKVswXSB8fCAkKCdib2R5JykuYXBwZW5kKGlmcmFtZSk7XG5cbiAgICAvL+WMheijueaWh+S7tuWfn1xuICAgIGlmKCFvcHRpb25zLmVsZW0ubmV4dCgpLmhhc0NsYXNzKEVMRU1fRk9STSkpe1xuICAgICAgdGhhdC5lbGVtRmlsZS53cmFwKGVsZW1Gb3JtKTsgICAgICBcbiAgICAgIFxuICAgICAgLy/ov73liqDpop3lpJbnmoTlj4LmlbBcbiAgICAgIG9wdGlvbnMuZWxlbS5uZXh0KCcuJysgRUxFTV9GT1JNKS5hcHBlbmQoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBsYXl1aS5lYWNoKG9wdGlvbnMuZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICAgICAgdmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgPyB2YWx1ZSgpIDogdmFsdWU7XG4gICAgICAgICAgYXJyLnB1c2goJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIicrIGtleSArJ1wiIHZhbHVlPVwiJysgdmFsdWUgKydcIj4nKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFyci5qb2luKCcnKTtcbiAgICAgIH0oKSk7XG4gICAgfVxuICB9O1xuICBcbiAgLy/lvILluLjmj5DnpLpcbiAgQ2xhc3MucHJvdG90eXBlLm1zZyA9IGZ1bmN0aW9uKGNvbnRlbnQpe1xuICAgIHJldHVybiBsYXllci5tc2coY29udGVudCwge2ljb246IDUsIHNoaWZ0OiA2fSk7XG4gIH07XG4gIFxuICAvL+WIpOaWree7keWumuWFg+e0oOaYr+WQpuS4uuaWh+S7tuWfn+acrOi6q1xuICBDbGFzcy5wcm90b3R5cGUuaXNGaWxlID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgZWxlbSA9IHRoaXMuY29uZmlnLmVsZW1bMF07XG4gICAgaWYoIWVsZW0pIHJldHVybjtcbiAgICByZXR1cm4gZWxlbS50YWdOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgZWxlbS50eXBlID09PSAnZmlsZSdcbiAgfTtcbiAgXG4gIC8v6aKE6K+75Zu+54mH5L+h5oGvXG4gIENsYXNzLnByb3RvdHlwZS5wcmV2aWV3ID0gZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBpZih3aW5kb3cuRmlsZVJlYWRlcil7XG4gICAgICBsYXl1aS5lYWNoKHRoYXQuY2hvb3NlRmlsZXMsIGZ1bmN0aW9uKGluZGV4LCBmaWxlKXtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyAgXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGluZGV4LCBmaWxlLCB0aGlzLnJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1lbHNle1xuICAgICAgbGF5ZXIubm90aWZ5KCdlcnJvcicsJ+W9k+WJjea1j+iniOWZqOeJiOacrOi/h+S9jizkuI3mlK/mjIHpooTop4jkuI7kuIrkvKAnKVxuICAgIH1cbiAgfTtcbiAgXG4gIC8v5omn6KGM5LiK5LygXG4gIENsYXNzLnByb3RvdHlwZS51cGxvYWQgPSBmdW5jdGlvbihmaWxlcywgdHlwZSl7XG4gICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgLG9wdGlvbnMgPSB0aGF0LmNvbmZpZ1xuICAgICxlbGVtRmlsZSA9IHRoYXQuZWxlbUZpbGVbMF1cbiAgICBcbiAgICAvL+mrmOe6p+a1j+iniOWZqOWkhOeQhuaWueW8j++8jOaUr+aMgei3qOWfn1xuICAgICxhamF4U2VuZCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc3VjY2Vzc2Z1bCA9IDAsIGFib3J0ZWQgPSAwXG4gICAgICAsaXRlbXMgPSBmaWxlcyB8fCB0aGF0LmZpbGVzIHx8IHRoYXQuY2hvb3NlRmlsZXMgfHwgZWxlbUZpbGUuZmlsZXNcbiAgICAgICxhbGxEb25lID0gZnVuY3Rpb24oKXsgLy/lpJrmlofku7blhajpg6jkuIrkvKDlrozmr5XnmoTlm57osINcbiAgICAgICAgaWYob3B0aW9ucy5tdWx0aXBsZSAmJiBzdWNjZXNzZnVsICsgYWJvcnRlZCA9PT0gdGhhdC5maWxlTGVuZ3RoKXtcbiAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hbGxEb25lID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMuYWxsRG9uZSh7XG4gICAgICAgICAgICB0b3RhbDogdGhhdC5maWxlTGVuZ3RoXG4gICAgICAgICAgICAsc3VjY2Vzc2Z1bDogc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgLGFib3J0ZWQ6IGFib3J0ZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGxheXVpLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGluZGV4LCBmaWxlKXtcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQob3B0aW9ucy5maWVsZCwgZmlsZSk7XG4gICAgICAgIFxuICAgICAgICAvL+i/veWKoOmineWklueahOWPguaVsFxuICAgICAgICBsYXl1aS5lYWNoKG9wdGlvbnMuZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gICAgICAgICAgdmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgPyB2YWx1ZShpbmRleCkgOiB2YWx1ZTtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy/mj5DkuqTmlofku7ZcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsXG4gICAgICAgICAgLHR5cGU6IG9wdGlvbnMubWV0aG9kXG4gICAgICAgICAgLGRhdGE6IGZvcm1EYXRhXG4gICAgICAgICAgLGNvbnRlbnRUeXBlOiBmYWxzZSBcbiAgICAgICAgICAscHJvY2Vzc0RhdGE6IGZhbHNlXG4gICAgICAgICAgLGRhdGFUeXBlOiAnanNvbidcbiAgICAgICAgICAsaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIHx8IHt9XG4gICAgICAgICAgLHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICBzdWNjZXNzZnVsKys7XG4gICAgICAgICAgICBkb25lKGluZGV4LCByZXMpO1xuICAgICAgICAgICAgYWxsRG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAsZXJyb3I6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBhYm9ydGVkKys7XG4gICAgICAgICAgICB0aGF0Lm1zZygn6K+35rGC5LiK5Lyg5o6l5Y+j5Ye6546w5byC5bi4Jyk7XG4gICAgICAgICAgICBlcnJvcihpbmRleCk7XG4gICAgICAgICAgICBhbGxEb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvL+S9jueJiOacrElF5aSE55CG5pa55byP77yM5LiN5pSv5oyB6Leo5Z+fXG4gICAgLGlmcmFtZVNlbmQgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGlmcmFtZSA9ICQoJyMnKyBFTEVNX0lGUkFNRSk7XG4gICAgXG4gICAgICB0aGF0LmVsZW1GaWxlLnBhcmVudCgpLnN1Ym1pdCgpO1xuXG4gICAgICAvL+iOt+WPluWTjeW6lOS/oeaBr1xuICAgICAgY2xlYXJJbnRlcnZhbChDbGFzcy50aW1lcik7XG4gICAgICBDbGFzcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVzLCBpZnJhbWVCb2R5ID0gaWZyYW1lLmNvbnRlbnRzKCkuZmluZCgnYm9keScpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IGlmcmFtZUJvZHkudGV4dCgpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICB0aGF0Lm1zZygn6I635Y+W5LiK5Lyg5ZCO55qE5ZON5bqU5L+h5oGv5Ye6546w5byC5bi4Jyk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChDbGFzcy50aW1lcik7XG4gICAgICAgICAgZXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZXMpe1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoQ2xhc3MudGltZXIpO1xuICAgICAgICAgIGlmcmFtZUJvZHkuaHRtbCgnJyk7XG4gICAgICAgICAgZG9uZSgwLCByZXMpO1xuICAgICAgICB9XG4gICAgICB9LCAzMCk7IFxuICAgIH1cbiAgICBcbiAgICAvL+e7n+S4gOWbnuiwg1xuICAgICxkb25lID0gZnVuY3Rpb24oaW5kZXgsIHJlcyl7XG4gICAgICB0aGF0LmVsZW1GaWxlLm5leHQoJy4nKyBFTEVNX0NIT09TRSkucmVtb3ZlKCk7XG4gICAgICBlbGVtRmlsZS52YWx1ZSA9ICcnO1xuICAgICAgaWYodHlwZW9mIHJlcyAhPT0gJ29iamVjdCcpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICByZXMgPSB7fTtcbiAgICAgICAgICByZXR1cm4gdGhhdC5tc2coJ+ivt+WvueS4iuS8oOaOpeWPo+i/lOWbnuacieaViEpTT04nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHlwZW9mIG9wdGlvbnMuZG9uZSA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLmRvbmUocmVzLCBpbmRleCB8fCAwLCBmdW5jdGlvbihmaWxlcyl7XG4gICAgICAgIHRoYXQudXBsb2FkKGZpbGVzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvL+e7n+S4gOe9kee7nOW8guW4uOWbnuiwg1xuICAgICxlcnJvciA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgIGlmKG9wdGlvbnMuYXV0byl7XG4gICAgICAgIGVsZW1GaWxlLnZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5lcnJvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLmVycm9yKGluZGV4IHx8IDAsIGZ1bmN0aW9uKGZpbGVzKXtcbiAgICAgICAgdGhhdC51cGxvYWQoZmlsZXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgICxleHRzID0gb3B0aW9ucy5leHRzXG4gICAgLGNoZWNrICx2YWx1ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgYXJyID0gW107XG4gICAgICBsYXl1aS5lYWNoKGZpbGVzIHx8IHRoYXQuY2hvb3NlRmlsZXMsIGZ1bmN0aW9uKGksIGl0ZW0pe1xuICAgICAgICBhcnIucHVzaChpdGVtLm5hbWUpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0oKVxuICAgIFxuICAgIC8v5Zue6LCD6L+U5Zue55qE5Y+C5pWwXG4gICAgLGFyZ3MgPSB7XG4gICAgICAvL+mihOiniFxuICAgICAgcHJldmlldzogZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgICAgICB0aGF0LnByZXZpZXcoY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy/kuIrkvKBcbiAgICAgICx1cGxvYWQ6IGZ1bmN0aW9uKGluZGV4LCBmaWxlKXtcbiAgICAgICAgdmFyIHRoaXNGaWxlID0ge307XG4gICAgICAgIHRoaXNGaWxlW2luZGV4XSA9IGZpbGU7XG4gICAgICAgIHRoYXQudXBsb2FkKHRoaXNGaWxlKTtcbiAgICAgIH1cbiAgICAgIC8v6L+95Yqg5paH5Lu25Yiw6Zif5YiXXG4gICAgICAscHVzaEZpbGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoYXQuZmlsZXMgPSB0aGF0LmZpbGVzIHx8IHt9O1xuICAgICAgICBsYXl1aS5lYWNoKHRoYXQuY2hvb3NlRmlsZXMsIGZ1bmN0aW9uKGluZGV4LCBpdGVtKXtcbiAgICAgICAgICB0aGF0LmZpbGVzW2luZGV4XSA9IGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhhdC5maWxlcztcbiAgICAgIH1cbiAgICAgIC8v6YeN572u5paH5Lu2XG4gICAgICAscmVzZXRGaWxlOiBmdW5jdGlvbihpbmRleCwgZmlsZSwgZmlsZW5hbWUpe1xuICAgICAgICB2YXIgbmV3RmlsZSA9IG5ldyBGaWxlKFtmaWxlXSwgZmlsZW5hbWUpO1xuICAgICAgICB0aGF0LmZpbGVzID0gdGhhdC5maWxlcyB8fCB7fTtcbiAgICAgICAgdGhhdC5maWxlc1tpbmRleF0gPSBuZXdGaWxlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvL+aPkOS6pOS4iuS8oFxuICAgICxzZW5kID0gZnVuY3Rpb24oKXsgICAgICBcbiAgICAgIC8v6YCJ5oup5paH5Lu255qE5Zue6LCDICAgICAgXG4gICAgICBpZih0eXBlID09PSAnY2hvb3NlJyB8fCBvcHRpb25zLmF1dG8pe1xuICAgICAgICBvcHRpb25zLmNob29zZSAmJiBvcHRpb25zLmNob29zZShhcmdzKTtcbiAgICAgICAgaWYodHlwZSA9PT0gJ2Nob29zZScpe1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvL+S4iuS8oOWJjeeahOWbnuiwg1xuICAgICAgb3B0aW9ucy5iZWZvcmUgJiYgb3B0aW9ucy5iZWZvcmUoYXJncyk7XG5cbiAgICAgIC8vSUXlhbzlrrnlpITnkIZcbiAgICAgIGlmKGRldmljZS5pZSl7XG4gICAgICAgIHJldHVybiBkZXZpY2UuaWUgPiA5ID8gYWpheFNlbmQoKSA6IGlmcmFtZVNlbmQoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYWpheFNlbmQoKTtcbiAgICB9O1xuXG4gICAgLy/moKHpqozmlofku7bmoLzlvI9cbiAgICB2YWx1ZSA9IHZhbHVlLmxlbmd0aCA9PT0gMCBcbiAgICAgID8gKChlbGVtRmlsZS52YWx1ZS5tYXRjaCgvW15cXC9cXFxcXStcXC4uKy9nKXx8W10pIHx8ICcnKVxuICAgIDogdmFsdWU7XG4gICAgXG4gICAgaWYodmFsdWUubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBzd2l0Y2gob3B0aW9ucy5hY2NlcHQpe1xuICAgICAgY2FzZSAnZmlsZSc6IC8v5LiA6Iis5paH5Lu2XG4gICAgICAgIGlmKGV4dHMgJiYgIVJlZ0V4cCgnXFxcXHdcXFxcLignKyBleHRzICsnKSQnLCAnaScpLnRlc3QoZXNjYXBlKHZhbHVlKSkpe1xuICAgICAgICAgIHRoYXQubXNnKCfpgInmi6nnmoTmlofku7bkuK3ljIXlkKvkuI3mlK/mjIHnmoTmoLzlvI8nKTtcbiAgICAgICAgICByZXR1cm4gZWxlbUZpbGUudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2aWRlbyc6IC8v6KeG6aKR5paH5Lu2XG4gICAgICAgIGlmKCFSZWdFeHAoJ1xcXFx3XFxcXC4oJysgKGV4dHMgfHwgJ2F2aXxtcDR8d21hfHJtdmJ8cm18Zmxhc2h8M2dwfGZsdicpICsnKSQnLCAnaScpLnRlc3QoZXNjYXBlKHZhbHVlKSkpe1xuICAgICAgICAgIHRoYXQubXNnKCfpgInmi6nnmoTop4bpopHkuK3ljIXlkKvkuI3mlK/mjIHnmoTmoLzlvI8nKTtcbiAgICAgICAgICByZXR1cm4gZWxlbUZpbGUudmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhdWRpbyc6IC8v6Z+z6aKR5paH5Lu2XG4gICAgICAgIGlmKCFSZWdFeHAoJ1xcXFx3XFxcXC4oJysgKGV4dHMgfHwgJ21wM3x3YXZ8bWlkJykgKycpJCcsICdpJykudGVzdChlc2NhcGUodmFsdWUpKSl7XG4gICAgICAgICAgdGhhdC5tc2coJ+mAieaLqeeahOmfs+mikeS4reWMheWQq+S4jeaUr+aMgeeahOagvOW8jycpO1xuICAgICAgICAgIHJldHVybiBlbGVtRmlsZS52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8v5Zu+54mH5paH5Lu2XG4gICAgICAgIGxheXVpLmVhY2godmFsdWUsIGZ1bmN0aW9uKGksIGl0ZW0pe1xuICAgICAgICAgIGlmKCFSZWdFeHAoJ1xcXFx3XFxcXC4oJysgKGV4dHMgfHwgJ2pwZ3xwbmd8Z2lmfGJtcHxqcGVnJCcpICsnKScsICdpJykudGVzdChlc2NhcGUoaXRlbSkpKXtcbiAgICAgICAgICAgIGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZihjaGVjayl7XG4gICAgICAgICAgdGhhdC5tc2coJ+mAieaLqeeahOWbvueJh+S4reWMheWQq+S4jeaUr+aMgeeahOagvOW8jycpO1xuICAgICAgICAgIHJldHVybiBlbGVtRmlsZS52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgLy/mo4Dpqozmlofku7bmlbDph49cbiAgICB0aGF0LmZpbGVMZW5ndGggPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGxlbmd0aCA9IDBcbiAgICAgICxpdGVtcyA9IGZpbGVzIHx8IHRoYXQuZmlsZXMgfHwgdGhhdC5jaG9vc2VGaWxlcyB8fCBlbGVtRmlsZS5maWxlcztcbiAgICAgIGxheXVpLmVhY2goaXRlbXMsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGxlbmd0aCsrO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH0oKTtcbiAgICBpZihvcHRpb25zLm51bWJlciAmJiB0aGF0LmZpbGVMZW5ndGggPiBvcHRpb25zLm51bWJlcil7XG4gICAgICByZXR1cm4gdGhhdC5tc2coJ+WQjOaXtuacgOWkmuWPquiDveS4iuS8oOeahOaVsOmHj+S4uu+8micrIG9wdGlvbnMubnVtYmVyKTtcbiAgICB9XG4gICAgXG4gICAgLy/mo4Dpqozmlofku7blpKflsI9cbiAgICBpZihvcHRpb25zLnNpemUgPiAwICYmICEoZGV2aWNlLmllICYmIGRldmljZS5pZSA8IDEwKSl7XG4gICAgICB2YXIgbGltaXRTaXplO1xuICAgICAgXG4gICAgICBsYXl1aS5lYWNoKHRoYXQuY2hvb3NlRmlsZXMsIGZ1bmN0aW9uKGluZGV4LCBmaWxlKXtcbiAgICAgICAgaWYoZmlsZS5zaXplID4gMTAyNCpvcHRpb25zLnNpemUpe1xuICAgICAgICAgIHZhciBzaXplID0gb3B0aW9ucy5zaXplLzEwMjQ7XG4gICAgICAgICAgc2l6ZSA9IHNpemUgPj0gMSA/IChzaXplLnRvRml4ZWQoMikgKyAnTUInKSA6IG9wdGlvbnMuc2l6ZSArICdLQidcbiAgICAgICAgICBlbGVtRmlsZS52YWx1ZSA9ICcnO1xuICAgICAgICAgIGxpbWl0U2l6ZSA9IHNpemU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYobGltaXRTaXplKSByZXR1cm4gdGhhdC5tc2coJ+aWh+S7tuS4jeiDvei2hei/hycrIGxpbWl0U2l6ZSk7XG4gICAgfVxuICAgIHNlbmQoKTtcbiAgfTtcbiAgXG4gIC8v5LqL5Lu25aSE55CGXG4gIENsYXNzLnByb3RvdHlwZS5ldmVudHMgPSBmdW5jdGlvbigpe1xuICAgIHZhciB0aGF0ID0gdGhpc1xuICAgICxvcHRpb25zID0gdGhhdC5jb25maWdcbiAgICBcbiAgICAvL+iuvue9ruW9k+WJjemAieaLqeeahOaWh+S7tumYn+WIl1xuICAgICxzZXRDaG9vc2VGaWxlID0gZnVuY3Rpb24oZmlsZXMpe1xuICAgICAgdGhhdC5jaG9vc2VGaWxlcyA9IHt9O1xuICAgICAgbGF5dWkuZWFjaChmaWxlcywgZnVuY3Rpb24oaSwgaXRlbSl7XG4gICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHRoYXQuY2hvb3NlRmlsZXNbdGltZSArICctJyArIGldID0gaXRlbTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvL+iuvue9rumAieaLqeeahOaWh+acrFxuICAgICxzZXRDaG9vc2VUZXh0ID0gZnVuY3Rpb24oZmlsZXMsIGZpbGVuYW1lKXtcbiAgICAgIHZhciBlbGVtRmlsZSA9IHRoYXQuZWxlbUZpbGVcbiAgICAgICx2YWx1ZSA9IGZpbGVzLmxlbmd0aCA+IDEgXG4gICAgICAgID8gZmlsZXMubGVuZ3RoICsgJ+S4quaWh+S7ticgXG4gICAgICA6ICgoZmlsZXNbMF0gfHwge30pLm5hbWUgfHwgKGVsZW1GaWxlWzBdLnZhbHVlLm1hdGNoKC9bXlxcL1xcXFxdK1xcLi4rL2cpfHxbXSkgfHwgJycpO1xuICAgICAgXG4gICAgICBpZihlbGVtRmlsZS5uZXh0KCkuaGFzQ2xhc3MoRUxFTV9DSE9PU0UpKXtcbiAgICAgICAgZWxlbUZpbGUubmV4dCgpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgdGhhdC51cGxvYWQobnVsbCwgJ2Nob29zZScpO1xuICAgICAgaWYodGhhdC5pc0ZpbGUoKSB8fCBvcHRpb25zLmNob29zZSkgcmV0dXJuO1xuICAgICAgZWxlbUZpbGUuYWZ0ZXIoJzxzcGFuIGNsYXNzPVwibGF5dWktaW5saW5lICcrIEVMRU1fQ0hPT1NFICsnXCI+JysgdmFsdWUgKyc8L3NwYW4+Jyk7XG4gICAgfTtcblxuICAgIC8v54K55Ye75LiK5Lyg5a655ZmoXG4gICAgb3B0aW9ucy5lbGVtLm9mZigndXBsb2FkLnN0YXJ0Jykub24oJ3VwbG9hZC5zdGFydCcsIGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgb3RoaXMgPSAkKHRoaXMpLCBkYXRhID0gb3RoaXMuYXR0cignbGF5LWRhdGEnKTtcbiAgICAgIFxuICAgICAgaWYoZGF0YSl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICBkYXRhID0gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gJysgZGF0YSkoKTtcbiAgICAgICAgICB0aGF0LmNvbmZpZyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zLCBkYXRhKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICBoaW50LmVycm9yKCdVcGxvYWQgZWxlbWVudCBwcm9wZXJ0eSBsYXktZGF0YSBjb25maWd1cmF0aW9uIGl0ZW0gaGFzIGEgc3ludGF4IGVycm9yOiAnICsgZGF0YSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGF0LmNvbmZpZy5pdGVtID0gb3RoaXM7XG4gICAgICB0aGF0LmVsZW1GaWxlWzBdLmNsaWNrKCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy/mi5bmi73kuIrkvKBcbiAgICBpZighKGRldmljZS5pZSAmJiBkZXZpY2UuaWUgPCAxMCkpe1xuICAgICAgb3B0aW9ucy5lbGVtLm9mZigndXBsb2FkLm92ZXInKS5vbigndXBsb2FkLm92ZXInLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgb3RoaXMgPSAkKHRoaXMpXG4gICAgICAgIG90aGlzLmF0dHIoJ2xheS1vdmVyJywgJycpO1xuICAgICAgfSlcbiAgICAgIC5vZmYoJ3VwbG9hZC5sZWF2ZScpLm9uKCd1cGxvYWQubGVhdmUnLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgb3RoaXMgPSAkKHRoaXMpXG4gICAgICAgIG90aGlzLnJlbW92ZUF0dHIoJ2xheS1vdmVyJyk7XG4gICAgICB9KVxuICAgICAgLm9mZigndXBsb2FkLmRyb3AnKS5vbigndXBsb2FkLmRyb3AnLCBmdW5jdGlvbihlLCBwYXJhbSl7XG4gICAgICAgIHZhciBvdGhpcyA9ICQodGhpcyksIGZpbGVzID0gcGFyYW0ub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXMgfHwgW107XG4gICAgICAgIFxuICAgICAgICBvdGhpcy5yZW1vdmVBdHRyKCdsYXktb3ZlcicpO1xuICAgICAgICBzZXRDaG9vc2VGaWxlKGZpbGVzKTtcbiAgICAgICAgXG4gICAgICAgIGlmKG9wdGlvbnMuYXV0byl7XG4gICAgICAgICAgdGhhdC51cGxvYWQoZmlsZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldENob29zZVRleHQoZmlsZXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy/mlofku7bpgInmi6lcbiAgICB0aGF0LmVsZW1GaWxlLm9mZigndXBsb2FkLmNoYW5nZScpLm9uKCd1cGxvYWQuY2hhbmdlJywgZnVuY3Rpb24oKXtcbiAgICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZXMgfHwgW107XG4gICAgICBzZXRDaG9vc2VGaWxlKGZpbGVzKTtcbiAgICAgIG9wdGlvbnMuYXV0byA/IHRoYXQudXBsb2FkKCkgOiBzZXRDaG9vc2VUZXh0KGZpbGVzKTsgLy/mmK/lkKboh6rliqjop6blj5HkuIrkvKBcbiAgICB9KTtcbiAgICBcbiAgICAvL+aJi+WKqOinpuWPkeS4iuS8oFxuICAgIG9wdGlvbnMuYmluZEFjdGlvbi5vZmYoJ3VwbG9hZC5hY3Rpb24nKS5vbigndXBsb2FkLmFjdGlvbicsIGZ1bmN0aW9uKCl7XG4gICAgICB0aGF0LnVwbG9hZCgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8v6Ziy5q2i5LqL5Lu26YeN5aSN57uR5a6aXG4gICAgaWYob3B0aW9ucy5lbGVtLmRhdGEoJ2hhdmVFdmVudHMnKSkgcmV0dXJuO1xuICAgIFxuICAgIHRoYXQuZWxlbUZpbGUub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ3VwbG9hZC5jaGFuZ2UnKTtcbiAgICB9KTtcbiAgICBcbiAgICBvcHRpb25zLmVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGlmKHRoYXQuaXNGaWxlKCkpIHJldHVybjtcbiAgICAgICQodGhpcykudHJpZ2dlcigndXBsb2FkLnN0YXJ0Jyk7XG4gICAgfSk7XG4gICAgXG4gICAgaWYob3B0aW9ucy5kcmFnKXtcbiAgICAgIG9wdGlvbnMuZWxlbS5vbignZHJhZ292ZXInLCBmdW5jdGlvbihlKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ3VwbG9hZC5vdmVyJyk7XG4gICAgICB9KS5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICQodGhpcykudHJpZ2dlcigndXBsb2FkLmxlYXZlJyk7XG4gICAgICB9KS5vbignZHJvcCcsIGZ1bmN0aW9uKGUpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykudHJpZ2dlcigndXBsb2FkLmRyb3AnLCBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBvcHRpb25zLmJpbmRBY3Rpb24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICQodGhpcykudHJpZ2dlcigndXBsb2FkLmFjdGlvbicpO1xuICAgIH0pO1xuICAgIFxuICAgIG9wdGlvbnMuZWxlbS5kYXRhKCdoYXZlRXZlbnRzJywgdHJ1ZSk7XG4gIH07XG4gIFxuICAvL+aguOW/g+WFpeWPoyAgXG4gIHVwbG9hZC5yZW5kZXIgPSBmdW5jdGlvbihvcHRpb25zKXtcbiAgICB2YXIgaW5zdCA9IG5ldyBDbGFzcyhvcHRpb25zKTtcbiAgICByZXR1cm4gdGhpc1VwbG9hZC5jYWxsKGluc3QpO1xuICB9O1xuICBcbiAgZXhwb3J0cyhNT0RfTkFNRSwgdXBsb2FkKTtcbn0pO1xuXG4iXX0=

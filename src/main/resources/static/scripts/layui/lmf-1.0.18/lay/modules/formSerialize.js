/** layui-v2.3.0-rc1-lmf-1.0.18 MIT License By https://www.layui.com */
 ;layui.define(function(e){function t(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?a:i),s=!!t.isIgnoreHidden,c=e&&e.elements?e.elements:[],h=Object.create(null),f=0;f<c.length;++f){var p=c[f],d="true"==p.getAttribute("data-ignore-hidden");if((t.disabled||!p.disabled)&&p.name&&!d&&u.test(p.nodeName)&&!l.test(p.type)&&(!s||"hidden"==p.type||!o(p))){var v=p.name,m=p.value;if("file"===p.type&&(m=p.files[0]),"checkbox"!==p.type&&"radio"!==p.type||p.checked||(m=void 0),t.empty){if("checkbox"!==p.type||p.checked||(m=""),"radio"===p.type&&(h[p.name]||p.checked?p.checked&&(h[p.name]=!0):h[p.name]=!1),void 0==m&&"radio"==p.type)continue}else if(!m)continue;if("select-multiple"!==p.type)n=r(n,v,m);else{m=[];for(var y=p.options,g=!1,b=0;b<y.length;++b){var k=y[b],x=t.empty&&!k.value,A=k.value||x;k.selected&&A&&(g=!0,n=t.hash&&"[]"!==v.slice(v.length-2)?r(n,v+"[]",k.value):r(n,v,k.value))}!g&&t.empty&&(n=r(n,v,""))}}}if(t.empty)for(var v in h)h[v]||(n=r(n,v,""));return n}function n(e){var t=[],n=/^([^\[\]]*)/,r=new RegExp(s),a=n.exec(e);for(a[1]&&t.push(a[1]);null!==(a=r.exec(e));)t.push(a[1]);return t}function r(e,t,n){if(0===t.length)return e=n;var a=t.shift(),i=a.match(/^\[(.+?)\]$/);if("[]"===a)return e=e||[],Array.isArray(e)?e.push(r(null,t,n)):(e._values=e._values||[],e._values.push(r(null,t,n))),e.filter(function(e){return""!=e});if(i){var l=i[1],u=+l;isNaN(u)?(e=e||{},e[l]=r(e[l],t,n)):(e=e||[],e[u]=r(e[u],t,n))}else e[a]=r(e[a],t,n);return e}function a(e,t,a){var i=t.match(s);if(i){var l=n(t);r(e,l,a)}else{var u=e[t];u?(Array.isArray(u)||(e[t]=[u]),e[t].push(a)):e[t]=a}return e}function i(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}var l=/^(?:submit|button|image|reset)$/i,u=/^(?:input|select|textarea|keygen)/i,s=/(\[[^\[\]]*\])/g,o=function(e){return null===e.offsetParent};e("formSerialize",t)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxheS9tb2R1bGVzL2Zvcm1TZXJpYWxpemUuanMiXSwibmFtZXMiOlsibGF5dWkiLCJkZWZpbmUiLCJleHBvcnRzIiwic2VyaWFsaXplIiwiZm9ybSIsIm9wdGlvbnMiLCJoYXNoIiwidW5kZWZpbmVkIiwicmVzdWx0Iiwic2VyaWFsaXplciIsImhhc2hfc2VyaWFsaXplciIsInN0cl9zZXJpYWxpemUiLCJpc0lnbm9yZUhpZGRlbiIsImVsZW1lbnRzIiwicmFkaW9fc3RvcmUiLCJPYmplY3QiLCJjcmVhdGUiLCJpIiwibGVuZ3RoIiwiZWxlbWVudCIsIm90aGlzX2lnbm9yZUhpZGRlbiIsImdldEF0dHJpYnV0ZSIsImRpc2FibGVkIiwibmFtZSIsImtfcl9zdWNjZXNzX2NvbnRybHMiLCJ0ZXN0Iiwibm9kZU5hbWUiLCJrX3Jfc3VibWl0dGVyIiwidHlwZSIsImlzSGlkZGVuIiwia2V5IiwidmFsIiwidmFsdWUiLCJmaWxlcyIsImNoZWNrZWQiLCJlbXB0eSIsInNlbGVjdE9wdGlvbnMiLCJpc1NlbGVjdGVkT3B0aW9ucyIsImoiLCJvcHRpb24iLCJhbGxvd2VkRW1wdHkiLCJoYXNWYWx1ZSIsInNlbGVjdGVkIiwic2xpY2UiLCJwYXJzZV9rZXlzIiwic3RyaW5nIiwia2V5cyIsInByZWZpeCIsImNoaWxkcmVuIiwiUmVnRXhwIiwiYnJhY2tldHMiLCJtYXRjaCIsImV4ZWMiLCJwdXNoIiwiaGFzaF9hc3NpZ24iLCJzaGlmdCIsImJldHdlZW4iLCJBcnJheSIsImlzQXJyYXkiLCJfdmFsdWVzIiwiZmlsdGVyIiwicmVzIiwiaW5kZXgiLCJpc05hTiIsIm1hdGNoZXMiLCJleGlzdGluZyIsInJlcGxhY2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJvZmZzZXRQYXJlbnQiXSwibWFwcGluZ3MiOiI7RUFBQUEsTUFBTUMsT0FBTyxTQUFVQyxHQThCbkIsUUFBU0MsR0FBVUMsRUFBTUMsR0FDQyxnQkFBWEEsR0FDUEEsR0FBV0MsT0FBUUQsR0FFR0UsU0FBakJG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IjoibGF5L21vZHVsZXMvZm9ybVNlcmlhbGl6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxheXVpLmRlZmluZShmdW5jdGlvbiAoZXhwb3J0cykge1xuLy8gZ2V0IHN1Y2Nlc3NmdWwgY29udHJvbCBmcm9tIGZvcm0gYW5kIGFzc2VtYmxlIGludG8gb2JqZWN0XG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNDAxL2ludGVyYWN0L2Zvcm1zLmh0bWwjaC0xNy4xMy4yXG5cbi8vIHR5cGVzIHdoaWNoIGluZGljYXRlIGEgc3VibWl0IGFjdGlvbiBhbmQgYXJlIG5vdCBzdWNjZXNzZnVsIGNvbnRyb2xzXG4vLyB0aGVzZSB3aWxsIGJlIGlnbm9yZWRcbiAgICB2YXIga19yX3N1Ym1pdHRlciA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldCkkL2k7XG5cbi8vIG5vZGUgbmFtZXMgd2hpY2ggY291bGQgYmUgc3VjY2Vzc2Z1bCBjb250cm9sc1xuICAgIHZhciBrX3Jfc3VjY2Vzc19jb250cmxzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXG4vLyBNYXRjaGVzIGJyYWNrZXQgbm90YXRpb24uXG4gICAgdmFyIGJyYWNrZXRzID0gLyhcXFtbXlxcW1xcXV0qXFxdKS9nO1xuXG4gICAgLy/lhYPntKDmmK/lkKbpmpDol49cbiAgICB2YXIgaXNIaWRkZW4gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gKGVsZW1lbnQub2Zmc2V0UGFyZW50ID09PSBudWxsKTtcbiAgICB9O1xuXG4vLyBzZXJpYWxpemVzIGZvcm0gZmllbGRzXG4vLyBAcGFyYW0gZm9ybSBNVVNUIGJlIGFuIEhUTUxGb3JtIGVsZW1lbnRcbi8vIEBwYXJhbSBvcHRpb25zIGlzIGFuIG9wdGlvbmFsIGFyZ3VtZW50IHRvIGNvbmZpZ3VyZSB0aGUgc2VyaWFsaXphdGlvbi4gRGVmYXVsdCBvdXRwdXRcbi8vIHdpdGggbm8gb3B0aW9ucyBzcGVjaWZpZWQgaXMgYSB1cmwgZW5jb2RlZCBzdHJpbmdcbi8vICAgIC0gaGFzaDogW3RydWUgfCBmYWxzZV0gQ29uZmlndXJlIHRoZSBvdXRwdXQgdHlwZS4gSWYgdHJ1ZSwgdGhlIG91dHB1dCB3aWxsXG4vLyAgICBiZSBhIGpzIG9iamVjdC5cbi8vICAgIC0gc2VyaWFsaXplcjogW2Z1bmN0aW9uXSBPcHRpb25hbCBzZXJpYWxpemVyIGZ1bmN0aW9uIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9uZS5cbi8vICAgIFRoZSBmdW5jdGlvbiB0YWtlcyAzIGFyZ3VtZW50cyAocmVzdWx0LCBrZXksIHZhbHVlKSBhbmQgc2hvdWxkIHJldHVybiBuZXcgcmVzdWx0XG4vLyAgICBoYXNoIGFuZCB1cmwgZW5jb2RlZCBzdHIgc2VyaWFsaXplcnMgYXJlIHByb3ZpZGVkIHdpdGggdGhpcyBtb2R1bGVcbi8vICAgIC0gZGlzYWJsZWQ6IFt0cnVlIHwgZmFsc2VdLiBJZiB0cnVlIHNlcmlhbGl6ZSBkaXNhYmxlZCBmaWVsZHMuXG4vLyAgICAtIGVtcHR5OiBbdHJ1ZSB8IGZhbHNlXS4gSWYgdHJ1ZSBzZXJpYWxpemUgZW1wdHkgZmllbGRzXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplKGZvcm0sIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge2hhc2g6ICEhb3B0aW9uc307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5oYXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGFzaCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0ID0gKG9wdGlvbnMuaGFzaCkgPyB7fSA6ICcnO1xuICAgICAgICB2YXIgc2VyaWFsaXplciA9IG9wdGlvbnMuc2VyaWFsaXplciB8fCAoKG9wdGlvbnMuaGFzaCkgPyBoYXNoX3NlcmlhbGl6ZXIgOiBzdHJfc2VyaWFsaXplKTtcbiAgICAgICAgdmFyIGlzSWdub3JlSGlkZGVuID0gISFvcHRpb25zLmlzSWdub3JlSGlkZGVuOyAvL+aYr+WQpuW/veeVpemakOiXj+Wfn1xuXG4gICAgICAgIHZhciBlbGVtZW50cyA9IGZvcm0gJiYgZm9ybS5lbGVtZW50cyA/IGZvcm0uZWxlbWVudHMgOiBbXTtcblxuICAgICAgICAvL09iamVjdCBzdG9yZSBlYWNoIHJhZGlvIGFuZCBzZXQgaWYgaXQncyBlbXB0eSBvciBub3RcbiAgICAgICAgdmFyIHJhZGlvX3N0b3JlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgdmFyIG90aGlzX2lnbm9yZUhpZGRlbiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlnbm9yZS1oaWRkZW4nKSA9PSAndHJ1ZSc7XG4gICAgICAgICAgICAvLyBpbmdvcmUgZGlzYWJsZWQgZmllbGRzXG4gICAgICAgICAgICBpZiAoKCFvcHRpb25zLmRpc2FibGVkICYmIGVsZW1lbnQuZGlzYWJsZWQpIHx8ICFlbGVtZW50Lm5hbWUgfHwgb3RoaXNfaWdub3JlSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlnbm9yZSBhbnlodGluZyB0aGF0IGlzIG5vdCBjb25zaWRlcmVkIGEgc3VjY2VzcyBmaWVsZFxuICAgICAgICAgICAgaWYgKCFrX3Jfc3VjY2Vzc19jb250cmxzLnRlc3QoZWxlbWVudC5ub2RlTmFtZSkgfHxcbiAgICAgICAgICAgICAgICBrX3Jfc3VibWl0dGVyLnRlc3QoZWxlbWVudC50eXBlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNJZ25vcmVIaWRkZW4gJiYgZWxlbWVudC50eXBlICE9ICdoaWRkZW4nICYmIGlzSGlkZGVuKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgdmFyIHZhbCA9IGVsZW1lbnQudmFsdWU7XG5cbiAgICAgICAgICAgIGlmKGVsZW1lbnQudHlwZSA9PT0gJ2ZpbGUnKXtcbiAgICAgICAgICAgICAgICB2YWwgPSBlbGVtZW50LmZpbGVzWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3ZSBjYW4ndCBqdXN0IHVzZSBlbGVtZW50LnZhbHVlIGZvciBjaGVja2JveGVzIGNhdXNlIHNvbWUgYnJvd3NlcnMgbGllIHRvIHVzXG4gICAgICAgICAgICAvLyB0aGV5IHNheSBcIm9uXCIgZm9yIHZhbHVlIHdoZW4gdGhlIGJveCBpc24ndCBjaGVja2VkXG4gICAgICAgICAgICBpZiAoKGVsZW1lbnQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBlbGVtZW50LnR5cGUgPT09ICdyYWRpbycpICYmICFlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHdlIHdhbnQgZW1wdHkgZWxlbWVudHNcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmVtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8gZm9yIGNoZWNrYm94XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2NoZWNrYm94JyAmJiAhZWxlbWVudC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGZvciByYWRpb1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyYWRpb19zdG9yZVtlbGVtZW50Lm5hbWVdICYmICFlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvX3N0b3JlW2VsZW1lbnQubmFtZV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvX3N0b3JlW2VsZW1lbnQubmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgb3B0aW9ucyBlbXB0eSBpcyB0cnVlLCBjb250aW51ZSBvbmx5IGlmIGl0cyByYWRpb1xuICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gdW5kZWZpbmVkICYmIGVsZW1lbnQudHlwZSA9PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHZhbHVlLWxlc3MgZmllbGRzIGFyZSBpZ25vcmVkIHVubGVzcyBvcHRpb25zLmVtcHR5IGlzIHRydWVcbiAgICAgICAgICAgICAgICBpZiAoIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG11bHRpIHNlbGVjdCBib3hlc1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ3NlbGVjdC1tdWx0aXBsZScpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBbXTtcblxuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RPcHRpb25zID0gZWxlbWVudC5vcHRpb25zO1xuICAgICAgICAgICAgICAgIHZhciBpc1NlbGVjdGVkT3B0aW9ucyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VsZWN0T3B0aW9ucy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VsZWN0T3B0aW9uc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbG93ZWRFbXB0eSA9IG9wdGlvbnMuZW1wdHkgJiYgIW9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc1ZhbHVlID0gKG9wdGlvbi52YWx1ZSB8fCBhbGxvd2VkRW1wdHkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkICYmIGhhc1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkT3B0aW9ucyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHVzaW5nIGEgaGFzaCBzZXJpYWxpemVyIGJlIHN1cmUgdG8gYWRkIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVjdCBub3RhdGlvbiBmb3IgYW4gYXJyYXkgaW4gdGhlIG11bHRpLXNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udGV4dC4gSGVyZSB0aGUgbmFtZSBhdHRyaWJ1dGUgb24gdGhlIHNlbGVjdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtaWdodCBiZSBtaXNzaW5nIHRoZSB0cmFpbGluZyBicmFja2V0IHBhaXIuIEJvdGggbmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZm9vXCIgYW5kIFwiZm9vW11cIiBzaG91bGQgYmUgYXJyYXlzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzaCAmJiBrZXkuc2xpY2Uoa2V5Lmxlbmd0aCAtIDIpICE9PSAnW10nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc2VyaWFsaXplcihyZXN1bHQsIGtleSArICdbXScsIG9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZXJpYWxpemVyKHJlc3VsdCwga2V5LCBvcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2VyaWFsaXplIGlmIG5vIHNlbGVjdGVkIG9wdGlvbnMgYW5kIG9wdGlvbnMuZW1wdHkgaXMgdHJ1ZVxuICAgICAgICAgICAgICAgIGlmICghaXNTZWxlY3RlZE9wdGlvbnMgJiYgb3B0aW9ucy5lbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZXJpYWxpemVyKHJlc3VsdCwga2V5LCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHNlcmlhbGl6ZXIocmVzdWx0LCBrZXksIHZhbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgYWxsIGVtcHR5IHJhZGlvIGJ1dHRvbnMgYW5kIHNlcmlhbGl6ZSB0aGVtIHdpdGgga2V5PVwiXCJcbiAgICAgICAgaWYgKG9wdGlvbnMuZW1wdHkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiByYWRpb19zdG9yZSkge1xuICAgICAgICAgICAgICAgIGlmICghcmFkaW9fc3RvcmVba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZXJpYWxpemVyKHJlc3VsdCwga2V5LCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZV9rZXlzKHN0cmluZykge1xuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICB2YXIgcHJlZml4ID0gL14oW15cXFtcXF1dKikvO1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBuZXcgUmVnRXhwKGJyYWNrZXRzKTtcbiAgICAgICAgdmFyIG1hdGNoID0gcHJlZml4LmV4ZWMoc3RyaW5nKTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIGtleXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoKG1hdGNoID0gY2hpbGRyZW4uZXhlYyhzdHJpbmcpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAga2V5cy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc2hfYXNzaWduKHJlc3VsdCwga2V5cywgdmFsdWUpIHtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5ID0ga2V5cy5zaGlmdCgpO1xuICAgICAgICB2YXIgYmV0d2VlbiA9IGtleS5tYXRjaCgvXlxcWyguKz8pXFxdJC8pO1xuXG4gICAgICAgIGlmIChrZXkgPT09ICdbXScpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCBbXTtcblxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGhhc2hfYXNzaWduKG51bGwsIGtleXMsIHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IGJlIHRoZSByZXN1bHQgb2YgYmFkIG5hbWUgYXR0cmlidXRlcyBsaWtlIFwiW11bZm9vXVwiLFxuICAgICAgICAgICAgICAgIC8vIGluIHRoaXMgY2FzZSB0aGUgb3JpZ2luYWwgYHJlc3VsdGAgb2JqZWN0IHdpbGwgYWxyZWFkeSBiZVxuICAgICAgICAgICAgICAgIC8vIGFzc2lnbmVkIHRvIGFuIG9iamVjdCBsaXRlcmFsLiBSYXRoZXIgdGhhbiBjb2VyY2UgdGhlIG9iamVjdCB0b1xuICAgICAgICAgICAgICAgIC8vIGFuIGFycmF5LCBvciBjYXVzZSBhbiBleGNlcHRpb24gdGhlIGF0dHJpYnV0ZSBcIl92YWx1ZXNcIiBpc1xuICAgICAgICAgICAgICAgIC8vIGFzc2lnbmVkIGFzIGFuIGFycmF5LlxuICAgICAgICAgICAgICAgIHJlc3VsdC5fdmFsdWVzID0gcmVzdWx0Ll92YWx1ZXMgfHwgW107XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll92YWx1ZXMucHVzaChoYXNoX2Fzc2lnbihudWxsLCBrZXlzLCB2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMgIT0gJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gS2V5IGlzIGFuIGF0dHJpYnV0ZSBuYW1lIGFuZCBjYW4gYmUgYXNzaWduZWQgZGlyZWN0bHkuXG4gICAgICAgIGlmICghYmV0d2Vlbikge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBoYXNoX2Fzc2lnbihyZXN1bHRba2V5XSwga2V5cywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IGJldHdlZW5bMV07XG4gICAgICAgICAgICAvLyArdmFyIGNvbnZlcnRzIHRoZSB2YXJpYWJsZSBpbnRvIGEgbnVtYmVyXG4gICAgICAgICAgICAvLyBiZXR0ZXIgdGhhbiBwYXJzZUludCBiZWNhdXNlIGl0IGRvZXNuJ3QgdHJ1bmNhdGUgYXdheSB0cmFpbGluZ1xuICAgICAgICAgICAgLy8gbGV0dGVycyBhbmQgYWN0dWFsbHkgZmFpbHMgaWYgd2hvbGUgdGhpbmcgaXMgbm90IGEgbnVtYmVyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSArc3RyaW5nO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVycyBiZXR3ZWVuIHRoZSBicmFja2V0cyBpcyBub3QgYSBudW1iZXIgaXQgaXMgYW5cbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSBuYW1lIGFuZCBjYW4gYmUgYXNzaWduZWQgZGlyZWN0bHkuXG4gICAgICAgICAgICBpZiAoaXNOYU4oaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHt9O1xuICAgICAgICAgICAgICAgIHJlc3VsdFtzdHJpbmddID0gaGFzaF9hc3NpZ24ocmVzdWx0W3N0cmluZ10sIGtleXMsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXN1bHRbaW5kZXhdID0gaGFzaF9hc3NpZ24ocmVzdWx0W2luZGV4XSwga2V5cywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbi8vIE9iamVjdC9oYXNoIGVuY29kaW5nIHNlcmlhbGl6ZXIuXG4gICAgZnVuY3Rpb24gaGFzaF9zZXJpYWxpemVyKHJlc3VsdCwga2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IGtleS5tYXRjaChicmFja2V0cyk7XG5cbiAgICAgICAgLy8gSGFzIGJyYWNrZXRzPyBVc2UgdGhlIHJlY3Vyc2l2ZSBhc3NpZ25tZW50IGZ1bmN0aW9uIHRvIHdhbGsgdGhlIGtleXMsXG4gICAgICAgIC8vIGNvbnN0cnVjdCBhbnkgbWlzc2luZyBvYmplY3RzIGluIHRoZSByZXN1bHQgdHJlZSBhbmQgbWFrZSB0aGUgYXNzaWdubWVudFxuICAgICAgICAvLyBhdCB0aGUgZW5kIG9mIHRoZSBjaGFpbi5cbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gcGFyc2Vfa2V5cyhrZXkpO1xuICAgICAgICAgICAgaGFzaF9hc3NpZ24ocmVzdWx0LCBrZXlzLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBOb24gYnJhY2tldCBub3RhdGlvbiBjYW4gbWFrZSBhc3NpZ25tZW50cyBkaXJlY3RseS5cbiAgICAgICAgICAgIHZhciBleGlzdGluZyA9IHJlc3VsdFtrZXldO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaGFzIGJlZW4gYXNzaWduZWQgYWxyZWFkeSAoZm9yIGluc3RhbmNlIHdoZW4gYSByYWRpbyBhbmRcbiAgICAgICAgICAgIC8vIGEgY2hlY2tib3ggaGF2ZSB0aGUgc2FtZSBuYW1lIGF0dHJpYnV0ZSkgY29udmVydCB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICAgIC8vIGludG8gYW4gYXJyYXkgYmVmb3JlIHB1c2hpbmcgaW50byBpdC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBOT1RFOiBJZiB0aGlzIHJlcXVpcmVtZW50IHdlcmUgcmVtb3ZlZCBhbGwgaGFzaCBjcmVhdGlvbiBhbmRcbiAgICAgICAgICAgIC8vIGFzc2lnbm1lbnQgY291bGQgZ28gdGhyb3VnaCBgaGFzaF9hc3NpZ25gLlxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4aXN0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IFtleGlzdGluZ107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbi8vIHVybGZvcm0gZW5jb2Rpbmcgc2VyaWFsaXplclxuICAgIGZ1bmN0aW9uIHN0cl9zZXJpYWxpemUocmVzdWx0LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIC8vIGVuY29kZSBuZXdsaW5lcyBhcyBcXHJcXG4gY2F1c2UgdGhlIGh0bWwgc3BlYyBzYXlzIHNvXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvKFxccik/XFxuL2csICdcXHJcXG4nKTtcbiAgICAgICAgdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXG4gICAgICAgIC8vIHNwYWNlcyBzaG91bGQgYmUgJysnIHJhdGhlciB0aGFuICclMjAnLlxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xuICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHJlc3VsdCA/ICcmJyA6ICcnKSArIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgdmFsdWU7XG4gICAgfVxuXG4gICAgZXhwb3J0cygnZm9ybVNlcmlhbGl6ZScsIHNlcmlhbGl6ZSk7XG59KTsiXX0=
